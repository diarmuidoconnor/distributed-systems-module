## Cloud App Development - Lab-Based Assessment (Outline).

__Duration:__ 120 minutes.

__Instructions:__ 
1. Use the CDK project provided prior to this exam to implement your solutions to the questions below.
1. Attempt all questions.
1. Each question has a git commit instruction at the end, which you must follow. Submissions that do not include this git history cannot be assessed.
1. It is not necessary to push to GitHub after every commit; just ensure you push at the end of the exam.

### Question 1.

A user can add new items to the Auction Stock table by publishing messages to the SNS topic. This triggers the lambdaA function (via the SQS queue) to process these messages. A message has two parts: the message data and the message attributes, for example:
~~~json
{. // Message Data JSON file
    "id": "Lot20",
    "name": "JAMES S. BROHAN (B. 1952)",
    "marketValue": 12000,
    "minimumPrice": 10000
}

{  // Attributes JSON file
    "auction_type": {
        "DataType": "String",
        "StringValue": "Public"
 }
 }
}
~~~
The attributes file specifies the auction type for an item: Public, Private, or Online. The lambdaA function should add an entry to the Auction Stock table, including the auction item's data properties and the auction type.


The command to publish a message to the topic is:
~~~bash
$ aws sns publish --topic-arn your-topic-arn  --message-attributes file://attributes.json --message file://message.json
~~~
__You are required__ to update the lambdaA function to handle these messages by writing the correct data to the database.

> __After completing the above implementation, commit the changes using the commit message "Updated add stock processing".__

### Question 2.

The application should process only add-stock-item messages whose auction type attribute is Public, Private, or Online; otherwise, it should ignore the message.

 __You are required__ to make the necessary stack change to satisfy this requirement.

#### After completing the above implementation, commit the changes using the commit message "Ignore incorrect add stock messages".

 ### Question 3.

If a new stock item's marketValue is less than its minimumPrice, the lambdaA function should throw an exception and not write the item to the database. These faulty add-stock-item messages should be sent to lambdaB instead; lambdaB will log them to CloudWatch.


__You are required__ to make the necessary function and infrastructure changes to implement this requirement.

#### After completing the above implementation, commit the changes using the commit message "Handle invalid add stock messages".

 ### Question 4.

A user can place a bid for an auction item by publishing a message to the SNS topic. For example, the message to place a bid of $500 for item Lot5 would be as follows:
~~~json
 {
    "bidId": 100,
    "custemorName": "Joe Bloggs",
    "detail": {
      "itenId": "Lot5",
      "bidValue": 500
 }
 }
~~~ 
To publish these messages, use the same AWS CLI command as before, but omit the attributes-file option. The lambdaC function should process bid messages; it simply writes an entry to the Bids table, composed of all the properties of the bid message and an additional timestamp property, i.e. new Date().toString().


__Yoy are required__ to implement this feature, bearing in mind that processing bids is __time-critical__ - minimise the delay in processing bids. You can ignore bid validation, e.g., whether a bid's itemId matches an auction item.


#### After completing the above implementation, commit the changes using the commit message "Handle bid messages".

### Question 5.

The lambdaC function should only receive bid messages; it should not receive add-item messages. 

#### After completing the above implementation, commit the changes using the commit message "Send bid messages to the relevant subscriber".

-------------------------------------

### Make sure you push your local git commits to GitHub at the end of the exam.
.