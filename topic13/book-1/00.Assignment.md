## Cloud App Development - Assignment Specification.

__IMPORTANT__
Please read the following instructions before commencing this assignment, as it may significantly impact your grade:

1. Read the entire specification before commencing development, and clarify any aspects you do not understand.
1. You are advised to set the visibility of your GitHub repo to PRIVATE to prevent plagiarism of your work. After the deadline date, you will be reminded to make it publicly accessible so that it can be assessed.
1. Your repo's Git log must have a clear, understandable and coherent history of the work on this assignment. The commit message must summarise the work performed at each stage.
1. You are expected to spread the effort required to complete the assignment over the period involved; do not cram the work into a few days just before the deadline, as this is not conducive to proper learning and will result in a minimal mark


__Objective:__ Demonstrate your understanding of the serverless services available on the AWS platform by designing and developing a serverless web API for a movie information system. The solution must use the CDK framework to provision the AWS resources required to support the API. 

__Completion date:__ 12/11/2025.

__Weighting:__ 45%.

__Deliverables:__
You should submit to [this Moodle link][submit] a text file (assignment.txt) containing:
   + The URL of your  GitHub repository. 
   + The URL of the YouTube video demonstrating the API. 
   
Notes:
+ The repo README is the documentation of the work you have carried out and must be complete and accurate. A template will be provided.

### Detailed Specification.

#### The Web API.

The REST API (App API) should meet the following endpoint requirements:

+ GET  /movies/movieid - return a specific movie item.
+ GET /movies/movieid/actors - return all actors in a movie.
+ GET /movies/movieid/actors/actorid - get a movie cast member 
+ GET /awards?movie=movieid&actor=actorid&awardBody=name - all combinations of querystring options are possible. 
     + movie - movie details only.
     + movie and actor - the cast member for the movie
     + movie, actor, and award body - the award won by the cast member for that award body.
     + movie and award body - the award(s) won by the movie for the award body.
     + actor and award body - the award(s) won by the actor for the award body.
    + etc
+ POST /movies - add a new movie item.
+ DELETE /movies/movieid - delete a specific movie item

#### Data entities.
The core domain data types used by the app are:

+ Movie.
     + movie ID - number.
     + title - string.
     + release date - string.
     + overview - string.
+ Actor.
     + actor id - number.
     + name - string.
     + bio - string.
     + date of birth - string.
+ Cast (Movie cast).
     + movie id
     + actor id
     + role name - string.
     + role description - string.
+ Award (Awards could be for an actor or a movie).
     + award id - number (movie id or an actor id.)
     + body - string (e.g. Bafta, Academy, Golden Globe)
     + category - string (e.g. Best Actor, Best Foreign Language movie)
     + year - number

#### DynamoDB table design.
The database design will follow the __Single-table__ design principle. All data types (movies, actors, etc) are stored in __one table__. The table's partition key will be the data entity's ID (as a string), prefixed with a character to identify the entity type. The prefixes used are:
+ Movie - m.
+ Actor - a.
+ Cast - c.
+ Award - w. 

The partition key value (excluding the prefix) for the different entity types is as follows:
+ Movie - movie id.
+ Actor - actor id.
+ Cast - movie id.
+ Award - movie id or actor id. 

The table has a composite primary key, where the sort key value depends on the entity type, as follows:
+ Movie - xxxx (default).
+ Actor - xxxx (default).
+ Cast - actor id (as a string).
+ Award -  body name.

Sample table items are as follows:

A movie:
+ m1234  |  xxxx  |  The Shawshank Redemption  |  05-03-1995  |  A banker convicted of uxoricide forms a friendship over a quarter century with a hardened convict .....

An actor:
+ a6789  |  xxxx  |  Morgan Freeman  |  Born in Memphis, Tennessee. After serving in the U.S. Air Force, he began his acting career in New York, gaining early recognition on the children's show The Electric Company ....  |  01-06-1937

A cast member:
+ c1234  |  6789  |  Ellis Redding  |  A contraband smuggler serving a life sentence. Red is being interviewed for parole after having spent 20 years at Shawshank for murder .....

An award:
+ w1234  |  Academy  |  Best Movie  |  1995
+ w6789  |  GoldenGlobe  |  Best Supporting Actor  |  1995

#### Authentication. 

The app has two forms of authentication:
+ Username and password credentials for users.
+ An API key for the administrator.

The Cognito service manages user credentials. The CDK stack should include a separate web API (the Auth API) to handle user authentication requests for the app. It should allow users to self-register, log in, and log out. You can reuse the Auth API developed in the labs in this assignment. 

The administrator authenticates using an API key instead of a username and password. The key is generated at deployment time by the API Gateway service.

#### Authorisation.

Only authenticated users can perform HTTP GET requests, while an authenticated administrator can perform POST, PUT, and DELETE requests.

#### Logging.

The application should log all user requests to CloudWatch logs. A log entry should specify the request path and the Cognito username of the requester, e.g.

+  doconnor   /movies/1234
+  jbloggs    /awards?movie=1234&awardBody=Academy

[The log stream is used for analysis, but this functionality is outside the scope of this assignment.] 

#### State Change.
Any database state changes (POST and DELETE) should trigger a lambda function that logs the event to CloudWatch. The log message should specify the action and details of the item, e.g. 

+ DELETE     m1234  |  xxxx  |  The Shawshank Redemption  |  05-03-1995  |  A banker convicted of uxoricide forms a friendship over a quarter century with a hardened convict .....

+  POST     + w1234  |  Academy  |  Best Movie  |  1995

### Grading Spectrum.

__Good (40-55%)__

+ Functionality: POST, DELETE and the majority of GET requests (no authentication)
+ Database: Seeding.

__Very Good (55-70%)__

+ Functionality: All HTTP requests.
+ Security: Cognito and API Key authentication. 

__Excellent (70-85%)__

+ Analytics: User activity logging.
+ Database: State change logging

__Outstanding (85+%)__

+ Infrastructure - Lambda layers or Multi-stack app.


[submit]: https://moodle.setu.ie/mod/assign/view.php?id=4612805